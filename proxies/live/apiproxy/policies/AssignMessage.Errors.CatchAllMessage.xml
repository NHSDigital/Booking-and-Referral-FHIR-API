<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<AssignMessage async="false" continueOnError="false" enabled="true" name="AssignMessage.Errors.CatchAllMessage">
  <Set>
    <Payload contentType="application/json" variablePrefix="%" variableSuffix="#">
      {
        "resourceType": "OperationOutcome",
        "meta": {
          "profile": [
            "https://fhir.hl7.org.uk/StructureDefinition/UKCore-OperationOutcome"
          ]
        },
        "issue": [
          {
            "severity": "error",
            "code": "{bref.error.code}",
            "details": {
              "coding": [
                {
                  "system": "http://hl7.org/fhir/ValueSet/operation-outcome",
                  "code": "{bref.error.coding.code}"
                }
              ]
            },
            "diagnostics": "{bref.error.diagnostics}"
          }
        ]
      }
    </Payload>
    <IgnoreUnresolvedVariables>true</IgnoreUnresolvedVariables>
    <AssignTo createNew="false" transport="https" type="request"/>
  </Set>
</AssignMessage>